-- This script was prepared as a supplement for the script generated by PgAdmin
-- This script contains "alter table" statements that add neccessary "check constraints"
BEGIN;

ALTER TABLE IF EXISTS database."PATIENTS"
    ADD CONSTRAINT "PAT_LIVER_FAILURE_CHECK" CHECK ("LIVER_FAILURE" IN (0, 1));
	
ALTER TABLE IF EXISTS database."DOCTORS"
	ADD CONSTRAINT "DOCT_PASSWORD_LENGTH_CHECK" CHECK (LENGTH("PASSWORD") >= 8 AND LENGTH("PASSWORD") <= 20);

ALTER TABLE IF EXISTS database."TYPES"
    ADD CONSTRAINT "TYP_AVAILABLE_TYPE_DISCR_CHECK" CHECK ("TYPE_DISCRIMINATOR" IN ('C', 'P', 'S'));
	
COMMENT ON CONSTRAINT "TYP_AVAILABLE_TYPE_DISCR_CHECK" ON database."TYPES"
    IS 'Type Descriptor values: C - Clinical Data, P - Procedures, S - Procedures Sessions';


ALTER TABLE IF EXISTS database."PARAMETERS"
	ADD CONSTRAINT "PRM_DATA_TYPE_DEF_CHECK" CHECK ("DATA_TYPE" IN (0, 1));
	
COMMENT ON CONSTRAINT "PRM_DATA_TYPE_DEF_CHECK" ON database."PARAMETERS"
	IS 'Data type def: 0 - means that the parameter value must be text, 1 - means that the parameter value must be numeric';
	
ALTER TABLE IF EXISTS database."PARAMETERS"
	ADD CONSTRAINT "PRM_IS_REGISTRATION_SUGGESTED_CHECK" CHECK ("IS_PARAMETER_REGISTRATION_SUGGESTED" IN (0, 1));

COMMENT ON CONSTRAINT "PRM_IS_REGISTRATION_SUGGESTED_CHECK" ON database."PARAMETERS"
	IS 'Data type def: 0 - means false, 1 - means true';


ALTER TABLE IF EXISTS database."CLINICAL_DATA"
	ADD CONSTRAINT "CLDA_TYPE_DISCR_CHECK" CHECK ("CLINICAL_DATA_TYPE_DISCRIMINATOR" = 'C');
	
ALTER TABLE IF EXISTS database."CLINICAL_DATA"
	ADD CONSTRAINT "CLDA_IS_DRAFT_CHECK" CHECK ("IS_DRAFT_VERSION" IN (0, 1));
	

ALTER TABLE IF EXISTS database."CLINICAL_DATA_PARAMETERS_VALUES"
	ADD CONSTRAINT "CLDA_PRMVAL_PARAMETER_TYPE_DISCR_CHECK" CHECK ("CLINICAL_DATA_TYPE_DISCRIMINATOR" = 'C');
	

ALTER TABLE IF EXISTS database."PROCEDURES"
	ADD CONSTRAINT "PROC_TYPE_DISCR_CHECK" CHECK ("PROCEDURE_TYPE_DISCRIMINATOR" = 'P');

ALTER TABLE IF EXISTS database."PROCEDURES"
	ADD CONSTRAINT "PROC_IS_DRAFT_CHECK" CHECK ("IS_DRAFT_VERSION" IN (0, 1));
	
	
ALTER TABLE IF EXISTS database."PROCEDURES_PARAMETERS_VALUES"
	ADD CONSTRAINT "PROC_PRMVAL_PARAMETER_TYPE_DISCR_CHECK" CHECK ("PROCEDURE_TYPE_DISCRIMINATOR" = 'P');


ALTER TABLE IF EXISTS database."PROCEDURES_SESSIONS"
	ADD CONSTRAINT "PROCSES_TYPE_DISCR_CHECK" CHECK ("SESSION_TYPE_DISCRIMINATOR" = 'S');

ALTER TABLE IF EXISTS database."PROCEDURES_SESSIONS"
	ADD CONSTRAINT "PROCSES_IS_DRAFT_CHECK" CHECK ("IS_DRAFT_VERSION" IN (0, 1));
	
	
ALTER TABLE IF EXISTS database."PROCEDURES_SESSIONS_PARAMETERS_VALUES"
	ADD CONSTRAINT "PROCSES_PRMVAL_PARAMETER_TYPE_DISCR_CHECK" CHECK ("SESSION_TYPE_DISCRIMINATOR" = 'S');

END;